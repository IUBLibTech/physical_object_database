<% content_for :context_menu do %>
  <div class="contextMenuItem">
	  <%= link_to("Create Bin", {:action => 'new'}) %>
	</div>
	<div class="contextMenuItem">
	  <%= link_to("Search Bins", {:action => 'search'}) %>
	</div>
<% end %>
<div class="left">
	<h2>Bins</h2>
	<table>
		<tr class="header">
			<th>Barcode</th>
			<th>Identifier</th>
			<th>Description</th>
			<th>Batch</th>
			<th>Status</th>
			<th>Actions</th>
		</tr>
		<% count = 1 %>
		<% @bins.each do |b|%>
			<tr>
				<td><%= b.barcode %></td>
				<td><%= b.identifier %></td>
				<td><%= b.description %></td>
				<td><%= b.batch.nil? ? "" : b.batch.name %></td>
				<td><%= b.status %></td>
				<td>
					<%= link_to("Show", {action: 'show', id: b.id}) %>
	        <%= link_to("Edit", {action: 'edit', id: b.id}) %>
	        <%= link_to("Delete", {action: 'delete', id: b.id})%>
				</td>
			</tr>
		<% end %>
	</table>
</div>
<div class="left">
	<h2>Unassigned Boxes</h2>
	<table>
		<tr>
			<th>Barcode</th>
			<th>Formats</th>
			<th>Actions</th>
		</tr>
		<% count = 1 %>
		<% @unassigned.each do |u| %>
			<tr class=<%= count.odd? ? 'odd' : 'even' %>>
				<td><%= u.mdpi_barcode %></td>
				<td><%= u.physical_objects.size > 0 ? u.physical_objects.first.format : ""%></td>
				<td>
					<%= link_to("Show", {action: 'show_box', id: u.id}) %>
					<%= link_to("Edit", {action: 'edit_box', id: u.id}) %>
				</td>
			</tr>
			<% count += 1 %>
		<% end %>
	</table>
</div>