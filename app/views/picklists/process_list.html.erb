<h2>Picklist <i><%= @picklist.name %></i> </h2>
<% if (@box or @bin) %>
	<h2>Packing <%= @box ? "Box" : "Bin" %> <i><%= @box ? @box.mdpi_barcode : @bin.identifier %></i></h2>
	<div>
		<%= form_for(:picklist, url: {action: 'container_full'}) do |f| %>
			<% if @box %>
				<%= hidden_field_tag "box_id", @box.id %>
				Bin barcode for box: <%= text_field_tag('bin_barcode', nil, maxlength: "14", size: "14", class: "mdpi") %>
				<br />
			<% elsif @bin %>
				<%= hidden_field_tag "bin_id", @bin.id %>
			<% end %>
			Mark <%= @box ? "<i>Box #{@box.mdpi_barcode}</i>".html_safe : "<i>Bin #{@bin.identifier}</i>".html_safe %> packed
			<%= f.submit("Packed") %>
		<% end %>
	</div>
<% else %>
	<h2>Manually Associating Items From Pick List <i><%= @picklist.name %></i></h2>
<% end %>
<%= render(partial: 'picklist_table') %>

<script type="text/javascript">
	$(document).ready(function() {
		$("input[type='text'].mdpi").on("click", function () {
			if ($(this).val() == '0') {
   			$(this).select();
			}
		});

		$("[id^=remove_]").click(function(event) {
			var oref = $(this).attr("href");
			var id = $(this).attr("id").substring("remove_".length);
			var mdpi = $('#po_mdpi_barcode_'+id).val();
			if (mdpi > 0) {
				var params = {mdpi_barcode: mdpi}
				var href = $(this).attr("href")+"?"+jQuery.param(params);
				$(this).attr("href", href);
			}
			if (confirm("This will remove the Physical Object from the Pick List. Do you wish to continue?") == true) {
				return true;
			} else {
				return false;
			}
		});
	});
</script>