<%= form_for(:physical_object, :url => {:action => @action, :id => @physical_object.id}) do |f| %>
<div id="physicalObject" class="left">
  <h2>Physical Object</h2>
  <table summary="Physical Object Fields">
    <% @physical_object.attributes.each do |name, value|%>
      <% if name != "id"%>
      <tr>
        <th><%= name.gsub("_", ' ').capitalize%></th>
        <td>
        <% if @edit_mode %>
          <% if name == "created_at" || name == "updated_at" %>
            <%= f.text_field name, :disabled => true %>
          <% elsif name == "format" %>
            <%= f.select(:format, @physical_object.formats) %>
          <% else %>
            <%= f.text_field(name)%>
          <% end %>
        <% else %>
          <%= value %>
        <%end%>
        </td>
      </tr>
      <% end %>
    <% end %>
  </table>
</div>

<div id="technicalMetadatum" class="left">
  <h2><%= @physical_object.format %> Technical Metadata</h2>
  <% if ! @physical_object.technical_metadatum.nil? %>
    <%= f.fields_for @physical_object.technical_metadatum.specialize do |tm_fields| %>
      <%= render(:partial => render_tm_partial(@physical_object), :locals => {:f => tm_fields}) %>
    <% end %>
  <% end %>
</div>

<%# add the submit and close off the form_for %>
<%if @edit_mode or @action == 'destroy' %>
  <div class="clear" ><%= submit_tag(@submit_text) %></div>
<% end %>
<% end %>