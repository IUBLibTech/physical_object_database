<table class="po list">
  <tr class="header">
    <% unless @group_key.nil? %><th>Position</th><% end %>
    <th>Current Status</th>
    <th>MDPI barcode</th>
    <th>Call number</th>
    <th>Format</th>
    <th>Actions</th>
  </tr>
  <% count = 1 %>
  <% unless @physical_objects.nil? %>
    <% @physical_objects.each do |po| %>
      <% if count.odd? %>
        <tr class='odd'>
        <%else%>
        <tr class='even'>
      <%end%>
      <% unless @group_key.nil? %>
        <td><%= po.group_position %></td>
      <% end %>
      <td><%= po.current_workflow_status.name %></td>
      <td><%= po.mdpi_barcode %></td>
      <td><%= po.call_number %></td>
      <td><%= po.format %></td>
      <td>
        <%= link_to("Show", po, class: 'action show') %>
        <% if @bin.nil? && @box.nil? && @picklist.nil? && @group_key.nil? %>
          <%= link_to("Edit", edit_physical_object_path(po), :class => 'action edit') %>
          <%= link_to("Split", split_show_physical_object_path(po), :class => 'action split')%>
          <%= link_to("Delete", physical_object_path(po.id), method: :delete, data: {confirm: 'Are you sure you want to delete this Physical Object?'})%>
        <% elsif (!@bin.nil? and po.box.nil?) %>
          <%= link_to("Remove", unbin_physical_object_path(po), method: :post, data: {confirm: 'Are you sure you want to remove this Physical Object from the Bin?'}) %>
        <% elsif !@box.nil? %>
          <%= link_to("Remove", unbox_physical_object_path(po), method: :post, data: {confirm: 'Are you sure you want to remove this Physical Object from the Box?'}) %>
        <% elsif !@picklist.nil? %>
	  <% if po.group_key.physical_objects_count <= 1 %>
            <%= link_to("Remove", unpick_physical_object_path(po), method: :post, data: {confirm: 'Are you sure you want to remove this Physical Object from the Picklist?'})%>
	  <% else %>
            <%= link_to("Remove All", unpick_physical_object_path(po), method: :post, data: {confirm: 'Are you sure you want to remove this Physical Object, and all other objects in the same Group Key, from the Picklist?'})%>
	  <% end %>
	<% elsif !@group_key.nil? %>
          <%= link_to("Remove", ungroup_physical_object_path(po), method: :post, data: {confirm: 'Are you sure you want to remove this Physical Object from the Group Key?'})%>
	
        <% end %>
        </td>
      </tr>
      <% count += 1 %>
    <% end %>
  <% end %>
</table>

