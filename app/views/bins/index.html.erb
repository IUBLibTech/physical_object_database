<h2>Index filters</h2>
<em>Unfiltered results are empty, by default.  To view all bins, explicitly apply a set of empty filters.</em>
<%= form_tag(bins_path, method: :get) do %>
  Filtering by workflow status: <%= select_tag :workflow_status, options_for_select(WorkflowStatusTemplate.where(object_type: "Bin").collect { |wst| wst.name }, params[:workflow_status]), { prompt: "(No filter applied)" } %><br/>
  Filtering by format: <%= select_tag :tm_format, options_for_select(TechnicalMetadatumModule.tm_formats_hash, params[:tm_format]), { prompt: "(No filter applied)" } %><br/>
  Filtering by identifier: <%= text_field_tag :identifier, params[:identifier] %><br/>
  <%= submit_tag "Apply filters" %>
<% end %>
<div class="left">
	<h2><%= params[:workflow_status] %> <%= params[:identifier] %> <%= params[:tm_format] %> Bins</h2>
  <h4>
    Bin/Physical Object Count: <%= @bins.size %>/<%= @bins.inject(0) { |sum, bin| sum + bin.physical_objects_count} %>
  </h4>
  Export current list to: <%= link_to 'Excel', bins_path(params.symbolize_keys.merge({format: :xls})) %>
	<%= render 'bins_table' %>
</div>
<div class="left">
	<h2>Unassigned Boxes</h2>
	<h4>
	  Unassigned Box/Physical Object Count: <%= @boxes.size %>/<%= @boxes.inject(0) { |sum, bin| sum + bin.physical_objects_count } %>
	</h4>
	<%= render 'boxes/boxes_table' %>
</div>
